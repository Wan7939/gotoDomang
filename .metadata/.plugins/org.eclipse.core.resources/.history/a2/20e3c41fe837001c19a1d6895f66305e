<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<div class="d-flex justify-content-end mt-5">
	
		<div class=" contents-box col-12">
		<c:forEach var="hotel" items="${hotelList}">
			<div id="hotel-card" class="d-flex write-box border rounded m-3">

				<img
					src="${hotel.imagePath}"
					width="350" height="350" alt="이미지">
				<div id="hotel-detail"
					class="card-post w-100 h-100 border-0 ml-3 pt-2">
				
					<b>호텔 이름</b>: ${hotel.hotelName} <br> <br> 
					
					<b>호텔 주소</b>: ${hotel.location}<br> <br> 
					<b>호텔 설명</b>: <br>${hotel.content}<br>
					<br> 
					<b>호텔 가격</b>: ${hotel.price}원<br> <br>
					 <b>호텔 연락처</b>:
					${hotel.hotelNumber}<br>
				</div>
			</div>
			
			<div class="d-flex justify-content-end">
				<button id="deleteBtn" class="btn btn-danger mr-2">삭제하기</button>
				<button id="upateBtn" class="btn btn-success ">수정하기</button>
			</div>
		</c:forEach>
		</div>
	
</div>

<script>

// ... 버튼 클릭 (삭제를 하기 위해)
$('#deleteBtn').on('click',function(e){
	e.preventDefault();

	
	
	// 포스트 아이디를 가져온다 => 지금 클릭된 태그의 포스트 아이디
	let postId = $(this).data('post-id');
	// alert(postId);
	// 모달에 포스트 아이디를 넣어준다
	$('#moreModal').data('post-id', postId)
	
	// 모달안에 있는 삭제하기 클릭
	$('#moreModal .del-post').on('click', function(e){
		e.preventDefault();
		
		let postId = $('#moreModal').data('post-id')
		// alert(postId);
		// 서버한테 글 삭제 요청(ajax)
		$.ajax({
			type: 'post'
			, url:'/hotel/delete'
			, data: {'postId' : postId}
			, success: function(data){
				if(data.result == 'success') {
					alert("삭제됐습니다.");
					location.reload(true);
				}
			}, error: function(e) {
				alert("게시글을 삭제하는데 실패했습니다" + e); 
			}
		});
	});
});
</script>
